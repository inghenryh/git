<odoo>
    <!-- Vista del formulario de configuración -->
    <record id="view_gps_settings_form" model="ir.ui.view">
        <field name="name">gps.settings.form</field>
        <field name="model">evisiongps.settings</field>
        <field name="arch" type="xml">
            <form string="Configuración de e-Vision GPS">
                <sheet>
                    <group>
                        <!-- Campos de configuración -->
                        <field name="email"/>
                        <field name="password" password="True"/>
                        <!-- Botón para probar la conexión -->
                        <button string="Probar Conexión" type="object" name="test_connection" class="btn-primary"/>
                    </group>
                    <group>
                        <!-- Estado de conexión y hash -->
                        <field name="connection_status" widget="statusbar" options="{'clickable': False}"/>
                        <field name="user_api_hash" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Acción para abrir la vista de configuración -->
    <record id="action_evisiongps_settings" model="ir.actions.act_window">
        <field name="name">Configuración de e-Vision GPS</field>
        <field name="res_model">evisiongps.settings</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
        <field name="context">{'search_default_id': 1, 'default_connection_status': 'not_tested'}</field>
        <field name="domain">[]</field>
    </record>

    <!-- Menú para acceder a la configuración -->
    <menuitem id="menu_evisiongps_settings"
              name="Configuración GPS"
              parent="fleet.menu_root"
              action="action_evisiongps_settings"
              sequence="20"/>
</odoo>
