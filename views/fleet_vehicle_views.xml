<odoo>
    <record id="view_fleet_vehicle_form_gps" model="ir.ui.view">
        <field name="name">fleet.vehicle.form.gps</field>
        <field name="model">fleet.vehicle</field>
        <field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group" position="inside">
                <group string="GPS">
                    <field name="has_gps"/>
                    <field name="gps_imei" modifiers="{'readonly': [['has_gps', '=', False]]}"/>
                    <field name="gps_sim_number" modifiers="{'readonly': [['has_gps', '=', False]]}"/>
                    <field name="gps_online_status" readonly="1"/>
                    <field name="gps_last_location" readonly="1"/>
                    <field name="gps_speed" readonly="1"/>
                    <field name="gps_device_id" readonly="1"/>
                    <field name="gps_last_update" readonly="1"/>

                    <button string="Ubicación Actual" type="object" name="action_get_location" class="btn-primary"/>
                    <button string="Sincronizar" type="object" name="action_sync_gps" class="btn-info"/>               
                </group>
            </xpath>
        </field>
    </record>

    <record id="view_fleet_vehicle_map" model="ir.ui.view">
        <field name="name">fleet.vehicle.map.view</field>
        <field name="model">fleet.vehicle</field>
        <field name="arch" type="xml">
            <form string="Ubicación del Vehículo">
                <group>
                    <field name="gps_last_location" readonly="1"/>
                    <button string="Ver en Google Maps" type="object" class="btn-secondary"
                            attrs="{'invisible': [['gps_last_location', '=', False]]}"
                            name="open_google_maps"/>
                </group>
                <div id="map" style="height: 400px; width: 100%;"/>
                <script type="text/javascript">
                    var map = L.map('map').setView([0, 0], 13);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: 'OpenStreetMap contributors'
                    }).addTo(map);
                    
                    function updateMap(lat, lon) {
                        map.setView([lat, lon], 13);
                        L.marker([lat, lon]).addTo(map).bindPopup("Ubicación Actual").openPopup();
                    }

                    setInterval(function() {
                        // Lógica para obtener nuevas coordenadas cada 20 segundos
                    }, 20000);
                </script>
            </form>
        </field>
    </record>
</odoo>
